# é•·ç…§åœ°åœ–ç¶²ç«™

> [English](README.md) | [ç¹é«”ä¸­æ–‡](README.zh-TW.md)

## Final Project Proposal

**æˆå“¡ï¼š** 109704001è¨±æ’ç¿ã€109704038å­«äºæ¶µã€110350028ç¿è¯é§¿ã€110704008ç¾…ç·¯ç¿”

## ğŸ¥ å½±ç‰‡å±•ç¤º

[è§€çœ‹å±•ç¤ºå½±ç‰‡](https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing)

## Application design

### å‹•æ©Ÿèˆ‡ä¸»æ—¨

åœ¨ç‚ºå®¶äººæŸ¥è©¢é•·ç…§ç›¸é—œæœå‹™æ™‚æ„Ÿåˆ°è³‡è¨Šæ··æ·†ï¼Œé é¢ä¸æ¸…ç­‰æƒ…æ³ç™¼ç”Ÿã€‚å› æ­¤æˆ‘å€‘å°çµ„æƒ³è¦ç‚ºå¹´é•·è€…åŠå…¶å®¶å±¬è¨­è¨ˆæ–¹ä¾¿çš„è³‡æ–™åº«ï¼Œå¾çµ±æ•´å…¬é–‹çš„è³‡æ–™è‘—æ‰‹,è¨­è¨ˆè³‡æ–™åº«æ¶æ§‹ï¼Œæœ€å¾Œåˆ°ç¶²é å‰å¾Œç«¯è¨­è¨ˆã€‚

### CRUD

- **Create:** å¯ä¾›ä½¿ç”¨è€…å‰µç«‹è‡ªå·±å¸³è™Ÿ
- **Read:** å¯ä¾›ä½¿ç”¨è€…é€²è¡Œé—œæ–¼é•·ç…§æœå‹™çš„åœ°å€ã€åŠŸèƒ½ã€è¦å‰‡é€²è¡ŒæŸ¥è©¢
- **Update:** å¯ä¾›ä½¿ç”¨è€…æ›´æ–°è‡ªå·±çš„è’è—æ©Ÿæ§‹
- **Delete:** å¯ä¾›ä½¿ç”¨è€…åˆªé™¤è‡ªå·±çš„è’è—æ©Ÿæ§‹

### ä»‹é¢

ç•Œé¢åˆ†ç‚ºå…©å¤§é¡ï¼š

#### æœå°‹ç•Œé¢
- åŠŸèƒ½ã€æœå‹™æœå°‹
- åœ°åŸŸæœå°‹
- åºŠä½å¤šå¯¡æ’åº
- ç›¸è¿‘è·é›¢æ’åº

#### åœ°åœ–é é¢
- æä¾›è‡ªå®¶åœ°å€æœå°‹
- åœ¨é»é¸åœ°æ¨™æ™‚æ¨™ç¤ºç›¸é—œè³‡è¨Š
- æ–¹åœ“åŠŸèƒ½
- ç›¸é—œè³‡è¨Šå¦‚æœå‹™ã€ç¶²å€ã€è¯çµ¡è³‡è¨Š

### å¯¦ä½œåŠŸèƒ½

- ä»¥**åºŠä½æ•¸**é€²è¡Œåˆ†é¡ï¼Œå¦‚åºŠä½æ•¸å¤šç‚ºç¶ ç‡ˆã€åºŠä½æ•¸ä¸­ç‚ºé»ƒç‡ˆã€åºŠä½æ•¸ä½ç‚ºç´…ç‡ˆï¼Œæ’åºå‘ˆç¾ã€‚
- ä»¥**æœå‹™é …ç›®**é€²è¡Œåˆ†é¡ï¼Œå’Œæœå°‹ã€‚
- ä»¥**ç¸£å¸‚ã€é„‰é®**é€²è¡Œæœå°‹ã€‚
- åˆ©ç”¨**google geographyåœ°åœ–åŒ–**é …ç›®ä¾†è®“äººç›´æ¥è§€çœ‹æ­¤åœ°å€æ‰€éœ€è³‡è¨Šï¼Œå¦‚è¯çµ¡æ–¹å¼ã€ç¶²å€ã€é›»è©±
- è¨­å®šåœ°å€ï¼Œæä¾›**æ–¹åœ“å¹¾å…¬é‡Œå…§æœ‰å“ªäº›æ©Ÿæ§‹**ï¼ŒåºŠä½æ•¸ç‹€æ…‹ç­‰ç­‰ã€‚
- è¨­å®šåœ°å€æä¾›**æ©Ÿæ§‹çš„è·é›¢**ã€‚
- æä¾›**æœå°‹æ©Ÿæ§‹åå­—ï¼Œ**æä¾›æ©Ÿæ§‹è³‡è¨Šã€‚
- é»é¸åœ°å€å¯ä»¥ç›´æ¥**é€£çµåˆ°googleå°èˆª**ä¸­ã€‚
- ä»¥åŠŸèƒ½åˆ†é¡æ™‚ï¼Œæä¾›ç›¸é—œç¶²ç«™ä»‹ç´¹è¦å®šï¼Œå¦‚è¡›æœéƒ¨ã€‚

## Data

> ***ç›´æ¥é»æ“Šåç¨±å³å¯åˆ°è³‡æ–™ä¾†æºçš„æ‰€åœ¨ç¶²å€***

### [é•·ç…§ABCæ“šé»](https://data.gov.tw/dataset/88270)

æ©Ÿæ§‹åç¨±ã€æ©Ÿæ§‹ä»£ç¢¼ã€æ©Ÿæ§‹ç¨®é¡ã€ç¸£å¸‚ã€å€ã€åœ°å€å…¨å€ã€ç¶“åº¦ã€ç·¯åº¦ã€O_ABCã€ç‰¹ç´„æœå‹™é …ç›®ã€ç‰¹ç´„ç¸£å¸‚ã€ç‰¹ç´„å€åŸŸã€æ©Ÿæ§‹é›»è©±ã€é›»å­éƒµä»¶ã€æ©Ÿæ§‹è² è²¬äººå§“åã€ç‰¹ç´„èµ·æ—¥ã€ç‰¹ç´„è¿„æ—¥ã€æœ€å¾Œç•°å‹•æ™‚é–“

### [å…¨åœ‹æ©Ÿæ§‹åå†Š](https://www.sfaa.gov.tw/sfaa/pages/detail.aspx?nodeid=366&pid=2630)

![æ©Ÿæ§‹åå†Š](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled.png)

### [è¡›æœéƒ¨é•·ç…§å°ˆå€](https://1966.gov.tw/LTC/mp-207.html)

é•·ç…§è¦å‰‡ã€ç”³è«‹èªªæ˜

## ERModel

> ***ä½¿ç”¨[QuickDBD](https://app.quickdatabasediagrams.com/#/d/SVcGqV)å¯¦ç¾ç¹ªè£½ERMï¼Œä½†æ­¤è»Ÿé«”çš„relationshipåªæœ‰(mandatory)1:M(optional)å¯é¸æ“‡ï¼Œä¸ä¸€å®šå’Œå¯¦éš›è¨­å®šæƒ…æ³ç›¸åŒã€‚***

### è³‡æ–™è¡¨èªªæ˜

#### institution
å°‡æ­¤æ©Ÿæ§‹çš„åŸºæœ¬è³‡æ–™ä½œç‚ºtable
- **ins_numï¼š** ä»£è¡¨æ©Ÿæ§‹ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPK
- **ins_nameï¼š** ä»£è¡¨æ©Ÿæ§‹çš„åç¨±

#### ins_info
å°‡æ©Ÿæ§‹çš„ç›¸é—œè³‡è¨Šä½œç‚ºtable
- **ins_numï¼š** ä»£è¡¨æ©Ÿæ§‹ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼Œä»¥åŠé€£å‘institutionçš„FK
- **managerï¼š** è² è²¬äººçš„ä¸­æ–‡å§“å
- **phoneï¼š** æ©Ÿæ§‹çš„è¯çµ¡é›»è©±
- **websiteï¼š** æ©Ÿæ§‹çš„ç›¸é—œç¶²å€

#### ins_capacity
å°‡æ©Ÿæ§‹çš„åºŠä½æ•¸ä½œç‚ºtable
- **ins_numï¼š** ä»£è¡¨æ©Ÿæ§‹ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼Œä»¥åŠé€£å‘institutionçš„FK
- **car_numï¼š** ä»£è¡¨æä¾›ä¹‹å®‰é¤Šå‹åºŠä½æ•¸
- **nurs_numï¼š** ä»£è¡¨æä¾›ä¹‹é¤Šè­·å‹åºŠä½æ•¸
- **dem_numï¼š** ä»£è¡¨æä¾›ä¹‹å¤±æ™ºç…§é¡§å‹åºŠä½æ•¸
- **lcar_numï¼š** ä»£è¡¨æä¾›ä¹‹é•·æœŸç…§è­·å‹åºŠä½æ•¸
- **housing_numï¼š** ä»£è¡¨ç›®å‰ä½¿ç”¨ä¸­åºŠä½æ•¸
- **providing_numï¼š** ä»£è¡¨æä¾›ä¹‹ç¸½åºŠä½æ•¸ï¼ˆderived attribute â‡’ ä¸Šè¿°cal, lcarâ€¦æä¾›ä¹‹åºŠä½çš„ç¸½å’Œï¼‰

#### type_func
ä»£è¡¨æ©Ÿæ§‹çš„é•·ç…§ç­‰ç´šå’ŒåŠŸèƒ½ä½œç‚ºtable
- **ins_numï¼š** ä»£è¡¨æ©Ÿæ§‹ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼Œä»¥åŠé€£å‘institutionçš„FK
- **typeï¼š** ä»£è¡¨æ©Ÿæ§‹é¡å‹ï¼ˆå¦‚ï¼šé•·ç…§ABCï¼Œæˆ–æ˜¯ç§äººæ©Ÿæ§‹ç­‰ç­‰ï¼‰
- **func_nameï¼š** ä»£è¡¨æä¾›ä¹‹æœå‹™ï¼Œé€£å‘func_webçš„func_nameä¹‹FKï¼ˆå› é€šå¸¸ä¸€æ©Ÿæ§‹åªæœƒé¡¯ç¤ºä¸»è¦æä¾›æœå‹™ï¼Œä¸æœƒæˆ–æ²’æœ‰å¯«å‰¯é …ï¼‰

#### func_web
ä»£è¡¨è—‰ç”±æœå‹™åç¨±æ‰€é€£çµåˆ°çš„è¦å‰‡ç¶²å€ä½œç‚ºtable
- **func_nameï¼š** ä»£è¡¨æä¾›ä¹‹æœå‹™ï¼Œç‚ºPK
- **webï¼š** ä»£è¡¨å°æ‡‰ä¹‹ç¶²å€

#### member
ä»£è¡¨èˆ‡ä½¿ç”¨è€…çš„ç›¸é—œè³‡æ–™
- **member_idï¼š** ä»£è¡¨ä½¿ç”¨è€…ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPK
- **member_nameï¼š** ä»£è¡¨ä½¿ç”¨è€…æš±ç¨±
- **member_emailï¼š** ä»£è¡¨ä½¿ç”¨è€…çš„emailï¼ˆåŒæ™‚ä½œç‚ºå¸³è™Ÿï¼‰
- **member_passwordï¼š** ä»£è¡¨ä½¿ç”¨è€…çš„å¯†ç¢¼

#### member_favorite
ä»£è¡¨ä½¿ç”¨è€…çš„è’è—æ©Ÿæ§‹
- **member_idï¼š** ä»£è¡¨ä½¿ç”¨è€…ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼ŒåŒæ™‚ä¹Ÿæ˜¯é€£å‘user.user_idçš„FK
- **ins_numï¼š** ä»£è¡¨æ©Ÿæ§‹ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼Œä»¥åŠé€£å‘institutionçš„FK

#### ins_address
ä»£è¡¨æ©Ÿæ§‹å’Œåœ°å€ç›¸é—œçš„è³‡è¨Šä½œç‚ºtable
- **add_idï¼š** ä»£è¡¨æ©Ÿæ§‹åœ°å€çš„ä»£è™Ÿï¼Œç”±ç³»çµ±ç”¢ç”Ÿä¸é‡è¤‡ä¸”é¡ä¼¼indexçš„å€¼ä½œç‚ºä»£è™Ÿï¼Œç‚ºPKï¼ˆç”±stringæ§‹æˆaddç•¶ä½œPKæˆ–FKæœƒé€ æˆæ•ˆç‡æµªè²»ï¼Œæ‰€ä»¥å¢åŠ æ­¤ç‰¹æ€§ç‚ºPKé”åˆ°æ–¹ä¾¿é‹ç®—ï¼‰
- **addï¼š** ä»£è¡¨æ©Ÿæ§‹æ‰€åœ¨çš„åœ°å€å…¨å
- **cityï¼š** ä»£è¡¨æ©Ÿæ§‹æ‰€åœ¨çš„ç¸£æˆ–å¸‚
- **distï¼š** ä»£è¡¨æ©Ÿæ§‹æ‰€åœ¨çš„å€æˆ–é„‰
- **longitudeï¼š** ä»£è¡¨æ©Ÿæ§‹æ‰€åœ¨çš„ç¶“åº¦
- **latitudeï¼š** ä»£è¡¨æ©Ÿæ§‹æ‰€åœ¨çš„ç·¯åº¦

### ABCåˆ†ç´šæœå‹™

| ABCåˆ†ç´š | æœå‹™é …ç›® (15) | å…§å®¹ | è¦å®šã€å‚™è¨» |
| --- | --- | --- | --- |
| A (1) | å€‹æ¡ˆç®¡ç†æœå‹™ | å±…å®¶æœå‹™+æ—¥é–“ç…§é¡§ | æ“¬è¨‚è¨ˆç•«ã€è¼”å°BCå–®ä½ |
| B (13) | å°è¦æ¨¡å¤šæ©Ÿèƒ½æœå‹™<br>æ—¥é–“ç…§é¡§æœå‹™<br>äº¤é€šæ¥é€æœå‹™<br>åˆ°å®…æ²æµ´è»Šæœå‹™<br>å±…å®¶å¤±èƒ½å€‹æ¡ˆå®¶åº­é†«å¸«ç…§è­·æœå‹™<br>å±…å®¶æœå‹™<br>å®¶åº­æ‰˜é¡§æœå‹™<br>å°ˆæ¥­ç…§è­·æœå‹™<br>å–˜æ¯æœå‹™<br>åœ˜é«”å®¶å±‹æœå‹™<br>è¼”å…·åŠå±…å®¶ç„¡éšœç¤™ç’°å¢ƒæœå‹™<br>ç‡Ÿé¤Šé¤é£²æœå‹™ | å±…å®¶ç…§é¡§ã€ç¤¾å€ç…§é¡§ã€æ©Ÿæ§‹ç…§é¡§ å…¶ä¸€ | å°è¦æ¨¡ã€å¤šæ©Ÿèƒ½é•·ç…§æœå‹™ |
| C (1) | å··å¼„é•·ç…§ç«™ | å…±é¤ã€å¥åº·ä¿ƒé€²ã€å»¶ç·©å¤±èƒ½ | ç¤¾å€åƒèˆ‡(é‡Œ)ã€è‡¨æ™‚çŸ­æ™‚æ•¸ç…§é¡§ã€åŸ¹è‚²ä¸­é«˜é½¡èˆ‡å­¸ç”ŸäººåŠ›è³‡æº |

### ER åœ–è¡¨

![ER åœ–è¡¨](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%201.png)

### è³‡æ–™åº«æ¶æ§‹åœ–

```sql
# Modify this code to update the DB schema diagram.
# To reset the sample schema, replace everything with
# two dots ('..' - without quotes).

institution
-
ins_num PK smallint 
ins_add_id FK >- ins_address.add_id smallint
ins_name UNIQUE varchar(50)

ins_capacity
-
ins_num PK smallint FK >- institution.ins_num 
caring_num smallint
nurse_num smallint
dem_num smallint
emp_num smallint #derived
long_caring_num smallint
housing_num smallint #derived
providing_num smallint

ins_info
-
ins_num PK smallint FK >- institution.ins_num
manager varchar(28)
phone varchar(50)
email varchar(100)
website varchar(500)

ins_address
-
add_id PK smallint
add varchar(100)
city char(6)
dist varchar(15)
longitude float
latitude float

type_func
-
int_num PK smallint FK >- institution.ins_num
type smallint
func_name varchar(60) FK >- func_web.func_name

func_web
-
func_name PK varchar(60)
func_website varchar(500)

user
-
user_id int PK
user_name unique varchar(50)
user_email varchar(100)
user_password varchar(50)

user_favorite
-
user_id int PK FK >- user.user_id
ins_num smallint PK FK >- institution.ins_num
```

## Work Plan

### Time Schedule

![æ™‚ç¨‹è¡¨ 1](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%202.png)

![æ™‚ç¨‹è¡¨ 2](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%203.png)

[Untitled Database](https://www.notion.so/268bf9f7e7654a0d9ee38f8cd911e67d?pvs=21)

### Discussion

[åœ˜éšŠè¨è«–ç´€éŒ„](https://www.notion.so/099d5c5a546546ff90322269b20ac268?pvs=21)

### Repository

https://github.com/Weng-john/DBcourse

## è³‡æ–™åº«å¯¦ä½œ

```sql
DROP DATABASE IF EXISTS Final_Project;

CREATE DATABASE Final_Project; 

USE Final_Project;

CREATE TABLE `institution` (
    `ins_num` smallint  NOT NULL ,
    `ins_name` varchar(100)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    ),
    CONSTRAINT `uc_institution_ins_name` UNIQUE (
        `ins_name`
    )
);

CREATE TABLE `ins_capacity` (
    `ins_num` smallint  NOT NULL ,
    `caring_num` smallint  NOT NULL ,
    `nurse_num` smallint  NOT NULL ,
    `dem_num` smallint  NOT NULL ,
    -- derived
    `long_caring_num` smallint  NOT NULL ,
    -- derived
    `housing_num` smallint  NOT NULL ,
    `providing_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_info` (
    `ins_num` smallint  NOT NULL ,
    `manager` varchar(28)  NOT NULL ,
    `phone` varchar(50)  NOT NULL ,
    `email` varchar(100)  NOT NULL ,
    `website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_address` (
    `ins_num` smallint  NOT NULL ,
    `addr` varchar(100)  NOT NULL ,
    `city` char(6)  NOT NULL ,
    `dist` varchar(15)  NOT NULL ,
    `longitude` float  NOT NULL ,
    `latitude` float  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `type_func` (
    `int_num` smallint  NOT NULL ,
    `pub_pri_type` smallint  NOT NULL ,
    `serve_type` smallint  NOT NULL ,
    `func_name` varchar(60)  NOT NULL ,
    PRIMARY KEY (
        `int_num`
    )
);

CREATE TABLE `func_web` (
    `func_name` varchar(60)  NOT NULL ,
    `func_website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `func_name`
    )
);

CREATE TABLE `user` (
    `user_id` int  NOT NULL ,
    `user_name` varchar(50)  NOT NULL ,
    `user_email` varchar(100)  NOT NULL ,
    `user_password` varchar(50)  NOT NULL ,
    PRIMARY KEY (
        `user_id`
    ),
    CONSTRAINT `uc_user_user_name` UNIQUE (
        `user_name`
    )
);

CREATE TABLE `user_favorite` (
    `user_id` int  NOT NULL ,
    `ins_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `user_id`,`ins_num`
    )
);

CREATE TABLE `temp` (
    `pub_pri_type` varchar(20),
    `ins_name` varchar(100),
    `website` varchar(500),
    `manager` varchar(28),
    `dist` varchar(15),
    `addr` varchar(100),
    `phone0` varchar(50),
    `phone1` varchar(50),
    `serve_type0` varchar(10),
    `serve_type1` varchar(10),
    `serve_type2` varchar(10),
    `serve_type3` varchar(10),
    `Init_Date` varchar(50),
    `caring_num` smallint,
    `nurse_num` smallint,
    `dem_num` smallint,
    -- derived
    `long_caring_num` smallint,
    -- derived
    `housing_num` smallint,
    `providing_num_111` smallint,

    CONSTRAINT `uc_temp_ins_name` UNIQUE (
        `ins_name`
    )
);

ALTER TABLE `ins_capacity` ADD CONSTRAINT `fk_ins_capacity_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_info` ADD CONSTRAINT `fk_ins_info_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_address` ADD CONSTRAINT `fk_ins_address_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_int_num` FOREIGN KEY(`int_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_func_name` FOREIGN KEY(`func_name`)
REFERENCES `func_web` (`func_name`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_user_id` FOREIGN KEY(`user_id`)
REFERENCES `user` (`user_id`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

LOAD DATA INFILE '/var/lib/mysql-files/final.csv' 
INTO TABLE temp
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';
```

---

## License

æœ¬å°ˆæ¡ˆç‚ºè³‡æ–™åº«èª²ç¨‹æœŸæœ«å°ˆé¡Œä½œæ¥­ã€‚

