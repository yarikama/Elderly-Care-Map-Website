# Elderly Care Map Website

**Language / Ë™ûË®Ä:** [EN](#english-version) | [‰∏≠Êñá](#‰∏≠ÊñáÁâàÊú¨)

---

<a name="english-version"></a>
## üìç English Version

# Final Project Proposal

**Team Members:** 109704001 Hsu Heng-Jui, 109704038 Sun Yu-Han, 110350028 Weng Hua-Chun, 110704008 Lo Wei-Hsiang

## Video Demonstration

[https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing](https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing)

## Application Design

### Motivation and Purpose

When searching for long-term care related services for family members, we experienced confusion with information and unclear web pages. Therefore, our team wanted to design a convenient database for elderly people and their families, starting from consolidating public data, designing database architecture, and finally implementing both frontend and backend web design.

### CRUD

- **Create:** Allow users to create their own accounts
- **Read:** Allow users to query long-term care services by region, function, and regulations
- **Update:** Allow users to update their favorite institutions
- **Delete:** Allow users to delete their favorite institutions

### Interface

The interface is divided into two main categories:

- **Search Interface**
    - Function and service search
    - Regional search
    - Sorting by bed capacity
    - Sorting by proximity

- **Map Page**
    - Home address search feature
    - Display relevant information when clicking on landmarks
    - Radius function
    - Related information such as services, website, contact information

### Implementation Features

- Classification by **bed capacity**: green light for high bed capacity, yellow light for medium, red light for low, displayed in sorted order.
- Classification and search by **service items**.
- Search by **county, city, and township**.
- Use **Google Maps** to allow users to directly view information at addresses, such as contact methods, website, phone number.
- Set address to provide **institutions within a certain radius**, bed capacity status, etc.
- Set address to provide **distance to institutions**.
- Provide **institution name search** and institution information.
- Clicking on an address can directly **link to Google navigation**.
- When categorizing by function, provide related website information and regulations, such as Ministry of Health and Welfare.

## Data

> ***Click the name to go to the data source website***

**[Long-term Care ABC Centers](https://data.gov.tw/dataset/88270):**

Institution name, institution code, institution type, county/city, district, full address, longitude, latitude, O_ABC, contracted service items, contracted county/city, contracted area, institution phone, email, institution manager name, contract start date, contract end date, last update time

**[National Institution Directory](https://www.sfaa.gov.tw/sfaa/pages/detail.aspx?nodeid=366&pid=2630):**

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled.png)

**[Ministry of Health and Welfare Long-term Care Section](https://1966.gov.tw/LTC/mp-207.html):**

Long-term care regulations, application instructions

### ER Model

> ***Using [QuickDBD](https://app.quickdatabasediagrams.com/#/d/SVcGqV) to create the ERM diagram. However, this software only supports (mandatory)1:M(optional) relationships, which may not match the actual settings.***

- **institution**: Basic information of the institution as a table
    - ins_num: Institution code, generated by the system as a unique index-like value, serves as PK
    - ins_name: Name of the institution
- **ins_info**: Related information of the institution as a table
    - ins_num: Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
    - manager: Full name of the manager
    - phone: Institution contact phone
    - website: Institution related website
- **ins_capacity**: Bed capacity of the institution as a table
    - ins_num: Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
    - car_num: Number of custodial care beds provided
    - nurs_num: Number of nursing care beds provided
    - dem_num: Number of dementia care beds provided
    - lcar_num: Number of long-term care beds provided
    - housing_num: Number of beds currently in use
    - providing_num: Total number of beds provided
        - (derived attribute ‚áí sum of the above cal, lcar... provided beds)
- **type_func**: Long-term care level and functions of the institution as a table
    - ins_num: Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
    - type: Institution type
        - (e.g., Long-term care ABC, or private institutions, etc.)
    - func_name: Services provided, FK to func_name in func_web
        - (Usually an institution only displays main services, not subsidiaries)
- **func_web**: Regulation website linked by service name as a table
    - func_name: Service name, serves as PK
    - web: Corresponding website
- **member**: User-related data
    - member_id: User ID, generated by the system as a unique index-like value, serves as PK
    - member_name: User nickname
    - member_email: User email
        - Also serves as account
    - member_password: User password
- **member_favorite**: User's favorite institutions
    - member_id: User ID, generated by the system as a unique index-like value, serves as PK and FK to user.user_id
    - ins_num: Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution

| ABC Level | Service Items (15) | Content | Regulations, Notes |
| --- | --- | --- | --- |
| A (1) | Case Management Service | Home Service + Day Care | Formulate plans, supervise BC units |
| B (13) | Small-scale Multi-function Service<br>Day Care Service<br>Transportation Service<br>Mobile Bathing Service<br>Home-based Disabled Individual Family Doctor Care Service<br>Home Service<br>Family Day Care Service<br>Professional Care Service<br>Respite Service<br>Group Home Service<br>Assistive Devices and Home Barrier-free Environment Service<br>Nutrition and Meal Service | One of: Home Care, Community Care, Institutional Care | Small-scale, multi-functional long-term care service |
| C (1) | Community Long-term Care Station | Group dining, health promotion, disability delay | Community participation (village), temporary short-term care, training middle-aged, elderly and student human resources |

- **ins_address**: Institution address-related information as a table
    - add_id: Institution address code, generated by the system as a unique index-like value, serves as PK
        - (Using string as PK or FK would cause efficiency waste, so this attribute is added as PK for convenient calculation)
    - add: Full address of the institution
    - city: County or city where the institution is located
    - dist: District or township where the institution is located
    - longitude: Longitude of the institution
    - latitude: Latitude of the institution

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%201.png)

```sql
# Modify this code to update the DB schema diagram.
# To reset the sample schema, replace everything with
# two dots ('..' - without quotes).

institution
-
ins_num PK smallint 
ins_add_id FK >- ins_address.add_id smallint
ins_name UNIQUE varchar(50)

ins_capacity
-
ins_num PK smallint FK >- institution.ins_num 
caring_num smallint
nurse_num smallint
dem_num smallint
emp_num smallint #derived
long_caring_num smallint
housing_num smallint #derived
providing_num smallint

ins_info
-
ins_num PK smallint FK >- institution.ins_num
manager varchar(28)
phone varchar(50)
email varchar(100)
website varchar(500)

ins_address
-
add_id PK smallint
add varchar(100)
city char(6)
dist varchar(15)
longitude float
latitude float

type_func
-
int_num PK smallint FK >- institution.ins_num
type smallint
func_name varchar(60) FK >- func_web.func_name

func_web
-
func_name PK varchar(60)
func_website varchar(500)

user
-
user_id int PK
user_name unique varchar(50)
user_email varchar(100)
user_password varchar(50)

user_favorite
-
user_id int PK FK >- user.user_id
ins_num smallint PK FK >- institution.ins_num
```

## Work Plan

### Time Schedule

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%202.png)

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%203.png)

### Discussion

[https://highfalutin-biplane-60c.notion.site/099d5c5a546546ff90322269b20ac268](https://www.notion.so/099d5c5a546546ff90322269b20ac268?pvs=21)

### Repository

https://github.com/Weng-john/DBcourse

```sql
DROP DATABASE IF EXISTS Final_Project;

CREATE DATABASE Final_Project; 

USE Final_Project;

CREATE TABLE `institution` (
    `ins_num` smallint  NOT NULL ,
    `ins_name` varchar(100)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    ),
    CONSTRAINT `uc_institution_ins_name` UNIQUE (
        `ins_name`
    )
);

CREATE TABLE `ins_capacity` (
    `ins_num` smallint  NOT NULL ,
    `caring_num` smallint  NOT NULL ,
    `nurse_num` smallint  NOT NULL ,
    `dem_num` smallint  NOT NULL ,
    -- derived
    `long_caring_num` smallint  NOT NULL ,
    -- derived
    `housing_num` smallint  NOT NULL ,
    `providing_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_info` (
    `ins_num` smallint  NOT NULL ,
    `manager` varchar(28)  NOT NULL ,
    `phone` varchar(50)  NOT NULL ,
    `email` varchar(100)  NOT NULL ,
    `website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_address` (
    `ins_num` smallint  NOT NULL ,
    `addr` varchar(100)  NOT NULL ,
    `city` char(6)  NOT NULL ,
    `dist` varchar(15)  NOT NULL ,
    `longitude` float  NOT NULL ,
    `latitude` float  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `type_func` (
    `int_num` smallint  NOT NULL ,
    `pub_pri_type` smallint  NOT NULL ,
    `serve_type` smallint  NOT NULL ,
    `func_name` varchar(60)  NOT NULL ,
    PRIMARY KEY (
        `int_num`
    )
);

CREATE TABLE `func_web` (
    `func_name` varchar(60)  NOT NULL ,
    `func_website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `func_name`
    )
);

CREATE TABLE `user` (
    `user_id` int  NOT NULL ,
    `user_name` varchar(50)  NOT NULL ,
    `user_email` varchar(100)  NOT NULL ,
    `user_password` varchar(50)  NOT NULL ,
    PRIMARY KEY (
        `user_id`
    ),
    CONSTRAINT `uc_user_user_name` UNIQUE (
        `user_name`
    )
);

CREATE TABLE `user_favorite` (
    `user_id` int  NOT NULL ,
    `ins_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `user_id`,`ins_num`
    )
);

CREATE TABLE `temp` (
    `pub_pri_type` varchar(20),
    `ins_name` varchar(100),
    `website` varchar(500),
    `manager` varchar(28),
    `dist` varchar(15),
    `addr` varchar(100),
    `phone0` varchar(50),
    `phone1` varchar(50),
    `serve_type0` varchar(10),
    `serve_type1` varchar(10),
    `serve_type2` varchar(10),
    `serve_type3` varchar(10),
    `Init_Date` varchar(50),
    `caring_num` smallint,
    `nurse_num` smallint,
    `dem_num` smallint,
    -- derived
    `long_caring_num` smallint,
    -- derived
    `housing_num` smallint,
    `providing_num_111` smallint,

    CONSTRAINT `uc_temp_ins_name` UNIQUE (
        `ins_name`
    )
);

ALTER TABLE `ins_capacity` ADD CONSTRAINT `fk_ins_capacity_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_info` ADD CONSTRAINT `fk_ins_info_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_address` ADD CONSTRAINT `fk_ins_address_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_int_num` FOREIGN KEY(`int_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_func_name` FOREIGN KEY(`func_name`)
REFERENCES `func_web` (`func_name`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_user_id` FOREIGN KEY(`user_id`)
REFERENCES `user` (`user_id`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

LOAD DATA INFILE '/var/lib/mysql-files/final.csv' 
INTO TABLE temp
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';
```

---

<a name="‰∏≠ÊñáÁâàÊú¨"></a>
## üìç ‰∏≠ÊñáÁâàÊú¨

# Final Project Proposal

<aside>
üíÜüèª **ÊàêÂì°Ôºö**109704001Ë®±ÊÅíÁùø„ÄÅ109704038Â≠´‰∫éÊ∂µ„ÄÅ110350028ÁøÅËèØÈßø„ÄÅ110704008ÁæÖÁ∑ØÁøî

</aside>

# ÂΩ±ÁâáÂ±ïÁ§∫

[https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing](https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing)

## Application design

### ÂãïÊ©üËàá‰∏ªÊó®

Âú®ÁÇ∫ÂÆ∂‰∫∫Êü•Ë©¢Èï∑ÁÖßÁõ∏ÈóúÊúçÂãôÊôÇÊÑüÂà∞Ë≥áË®äÊ∑∑Ê∑ÜÔºåÈ†ÅÈù¢‰∏çÊ∏ÖÁ≠âÊÉÖÊ≥ÅÁôºÁîü„ÄÇÂõ†Ê≠§ÊàëÂÄëÂ∞èÁµÑÊÉ≥Ë¶ÅÁÇ∫Âπ¥Èï∑ËÄÖÂèäÂÖ∂ÂÆ∂Â±¨Ë®≠Ë®àÊñπ‰æøÁöÑË≥áÊñôÂ∫´ÔºåÂæûÁµ±Êï¥ÂÖ¨ÈñãÁöÑË≥áÊñôËëóÊâã,Ë®≠Ë®àË≥áÊñôÂ∫´Êû∂ÊßãÔºåÊúÄÂæåÂà∞Á∂≤È†ÅÂâçÂæåÁ´ØË®≠Ë®à„ÄÇ

### CRUD

- **Create:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÂâµÁ´ãËá™Â∑±Â∏≥Ëôü
- **Read:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÈÄ≤Ë°åÈóúÊñºÈï∑ÁÖßÊúçÂãôÁöÑÂú∞ÂçÄ„ÄÅÂäüËÉΩ„ÄÅË¶èÂâáÈÄ≤Ë°åÊü•Ë©¢
- **Update:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÊõ¥Êñ∞Ëá™Â∑±ÁöÑËíêËóèÊ©üÊßã
- **Delete:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÂà™Èô§Ëá™Â∑±ÁöÑËíêËóèÊ©üÊßã

### ‰ªãÈù¢

ÁïåÈù¢ÂàÜÁÇ∫ÂÖ©Â§ßÈ°ûÔºö

- **ÊêúÂ∞ãÁïåÈù¢**
    - ÂäüËÉΩ„ÄÅÊúçÂãôÊêúÂ∞ã
    - Âú∞ÂüüÊêúÂ∞ã
    - Â∫ä‰ΩçÂ§öÂØ°ÊéíÂ∫è
    - Áõ∏ËøëË∑ùÈõ¢ÊéíÂ∫è
    

- **Âú∞ÂúñÈ†ÅÈù¢**
    - Êèê‰æõËá™ÂÆ∂Âú∞ÂùÄÊêúÂ∞ã
    - Âú®ÈªûÈÅ∏Âú∞Ê®ôÊôÇÊ®ôÁ§∫Áõ∏ÈóúË≥áË®ä
    - ÊñπÂúìÂäüËÉΩ
    - Áõ∏ÈóúË≥áË®äÂ¶ÇÊúçÂãô„ÄÅÁ∂≤ÂùÄ„ÄÅËÅØÁµ°Ë≥áË®ä
    

### ÂØ¶‰ΩúÂäüËÉΩ

- ‰ª•**Â∫ä‰ΩçÊï∏**ÈÄ≤Ë°åÂàÜÈ°ûÔºåÂ¶ÇÂ∫ä‰ΩçÊï∏Â§öÁÇ∫Á∂†Ááà„ÄÅÂ∫ä‰ΩçÊï∏‰∏≠ÁÇ∫ÈªÉÁáà„ÄÅÂ∫ä‰ΩçÊï∏‰ΩéÁÇ∫Á¥ÖÁáàÔºåÊéíÂ∫èÂëàÁèæ„ÄÇ
- ‰ª•**ÊúçÂãôÈ†ÖÁõÆ**ÈÄ≤Ë°åÂàÜÈ°ûÔºåÂíåÊêúÂ∞ã„ÄÇ
- ‰ª•**Á∏£Â∏Ç„ÄÅÈÑâÈéÆ**ÈÄ≤Ë°åÊêúÂ∞ã„ÄÇ
- Âà©Áî®**google geographyÂú∞ÂúñÂåñ**È†ÖÁõÆ‰æÜËÆì‰∫∫Áõ¥Êé•ËßÄÁúãÊ≠§Âú∞ÂùÄÊâÄÈúÄË≥áË®äÔºåÂ¶ÇËÅØÁµ°ÊñπÂºè„ÄÅÁ∂≤ÂùÄ„ÄÅÈõªË©±
- Ë®≠ÂÆöÂú∞ÂùÄÔºåÊèê‰æõ**ÊñπÂúìÂπæÂÖ¨ÈáåÂÖßÊúâÂì™‰∫õÊ©üÊßã**ÔºåÂ∫ä‰ΩçÊï∏ÁãÄÊÖãÁ≠âÁ≠â„ÄÇ
- Ë®≠ÂÆöÂú∞ÂùÄÊèê‰æõ**Ê©üÊßãÁöÑË∑ùÈõ¢**„ÄÇ
- Êèê‰æõ**ÊêúÂ∞ãÊ©üÊßãÂêçÂ≠óÔºå**Êèê‰æõÊ©üÊßãË≥áË®ä„ÄÇ
- ÈªûÈÅ∏Âú∞ÂùÄÂèØ‰ª•Áõ¥Êé•**ÈÄ£ÁµêÂà∞googleÂ∞éËà™**‰∏≠„ÄÇ
- ‰ª•ÂäüËÉΩÂàÜÈ°ûÊôÇÔºåÊèê‰æõÁõ∏ÈóúÁ∂≤Á´ô‰ªãÁ¥πË¶èÂÆöÔºåÂ¶ÇË°õÊúçÈÉ®„ÄÇ

## Data

> ***Áõ¥Êé•ÈªûÊìäÂêçÁ®±Âç≥ÂèØÂà∞Ë≥áÊñô‰æÜÊ∫êÁöÑÊâÄÂú®Á∂≤ÂùÄ***
> 

****[Èï∑ÁÖßABCÊìöÈªû](https://data.gov.tw/dataset/88270)Ôºö**

Ê©üÊßãÂêçÁ®±„ÄÅÊ©üÊßã‰ª£Á¢º„ÄÅÊ©üÊßãÁ®ÆÈ°û„ÄÅÁ∏£Â∏Ç„ÄÅÂçÄ„ÄÅÂú∞ÂùÄÂÖ®ÂùÄ„ÄÅÁ∂ìÂ∫¶„ÄÅÁ∑ØÂ∫¶„ÄÅO_ABC„ÄÅÁâπÁ¥ÑÊúçÂãôÈ†ÖÁõÆ„ÄÅÁâπÁ¥ÑÁ∏£Â∏Ç„ÄÅÁâπÁ¥ÑÂçÄÂüü„ÄÅÊ©üÊßãÈõªË©±„ÄÅÈõªÂ≠êÈÉµ‰ª∂„ÄÅÊ©üÊßãË≤†Ë≤¨‰∫∫ÂßìÂêç„ÄÅÁâπÁ¥ÑËµ∑Êó•„ÄÅÁâπÁ¥ÑËøÑÊó•„ÄÅÊúÄÂæåÁï∞ÂãïÊôÇÈñì

****[ÂÖ®ÂúãÊ©üÊßãÂêçÂÜä](https://www.sfaa.gov.tw/sfaa/pages/detail.aspx?nodeid=366&pid=2630)Ôºö**

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled.png)

**[Ë°õÊúçÈÉ®Èï∑ÁÖßÂ∞àÂçÄ](https://1966.gov.tw/LTC/mp-207.html)**Ôºö

Èï∑ÁÖßË¶èÂâá„ÄÅÁî≥Ë´ãË™™Êòé

### ERModel

> ***‰ΩøÁî®[QuickDBD](https://app.quickdatabasediagrams.com/#/d/SVcGqV)ÂØ¶ÁèæÁπ™Ë£ΩERMÔºå‰ΩÜÊ≠§ËªüÈ´îÁöÑrelationshipÂè™Êúâ(mandatory)1:M(optional)ÂèØÈÅ∏ÊìáÔºå‰∏ç‰∏ÄÂÆöÂíåÂØ¶ÈöõË®≠ÂÆöÊÉÖÊ≥ÅÁõ∏Âêå„ÄÇ***
> 
- **institution**ÔºöÂ∞áÊ≠§Ê©üÊßãÁöÑÂü∫Êú¨Ë≥áÊñô‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
    - ins_nameÔºö‰ª£Ë°®Ê©üÊßãÁöÑÂêçÁ®±
- **ins_info**ÔºöÂ∞áÊ©üÊßãÁöÑÁõ∏ÈóúË≥áË®ä‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - managerÔºöË≤†Ë≤¨‰∫∫ÁöÑ‰∏≠ÊñáÂßìÂêç
    - phoneÔºöÊ©üÊßãÁöÑËÅØÁµ°ÈõªË©±
    - websiteÔºöÊ©üÊßãÁöÑÁõ∏ÈóúÁ∂≤ÂùÄ
- **ins_capacity**ÔºöÂ∞áÊ©üÊßãÁöÑÂ∫ä‰ΩçÊï∏‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - car_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÂÆâÈ§äÂûãÂ∫ä‰ΩçÊï∏
    - nurs_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÈ§äË≠∑ÂûãÂ∫ä‰ΩçÊï∏
    - dem_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÂ§±Êô∫ÁÖßÈ°ßÂûãÂ∫ä‰ΩçÊï∏
    - lcar_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÈï∑ÊúüÁÖßË≠∑ÂûãÂ∫ä‰ΩçÊï∏
    - housing_numÔºö‰ª£Ë°®ÁõÆÂâç‰ΩøÁî®‰∏≠Â∫ä‰ΩçÊï∏
    - providing_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÁ∏ΩÂ∫ä‰ΩçÊï∏
        - Ôºàderived attribute ‚áí ‰∏äËø∞cal, lcar‚Ä¶Êèê‰æõ‰πãÂ∫ä‰ΩçÁöÑÁ∏ΩÂíåÔºâ
- **type_func**Ôºö‰ª£Ë°®Ê©üÊßãÁöÑÈï∑ÁÖßÁ≠âÁ¥öÂíåÂäüËÉΩ‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - typeÔºö‰ª£Ë°®Ê©üÊßãÈ°ûÂûã
        - ÔºàÂ¶ÇÔºöÈï∑ÁÖßABCÔºåÊàñÊòØÁßÅ‰∫∫Ê©üÊßãÁ≠âÁ≠âÔºâ
    - func_nameÔºö‰ª£Ë°®Êèê‰æõ‰πãÊúçÂãôÔºåÈÄ£Âêëfunc_webÁöÑfunc_name‰πãFK
        - ÔºàÂõ†ÈÄöÂ∏∏‰∏ÄÊ©üÊßãÂè™ÊúÉÈ°ØÁ§∫‰∏ªË¶ÅÊèê‰æõÊúçÂãôÔºå‰∏çÊúÉÊàñÊ≤íÊúâÂØ´ÂâØÈ†ÖÔºâ
- **func_web**Ôºö‰ª£Ë°®ËóâÁî±ÊúçÂãôÂêçÁ®±ÊâÄÈÄ£ÁµêÂà∞ÁöÑË¶èÂâáÁ∂≤ÂùÄ‰ΩúÁÇ∫table
    - func_nameÔºö‰ª£Ë°®Êèê‰æõ‰πãÊúçÂãôÔºåÁÇ∫PK
    - **webÔºö‰ª£Ë°®Â∞çÊáâ‰πãÁ∂≤ÂùÄ**
- memberÔºö‰ª£Ë°®Ëàá‰ΩøÁî®ËÄÖÁöÑÁõ∏ÈóúË≥áÊñô
    - member_idÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
    - member_nameÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÊö±Á®±
    - member_emailÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑemail
        - ÂêåÊôÇ‰ΩúÁÇ∫Â∏≥Ëôü
    - member_passwordÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑÂØÜÁ¢º
- member**_favorite**Ôºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑËíêËóèÊ©üÊßã
    - member_idÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºåÂêåÊôÇ‰πüÊòØÈÄ£Âêëuser.user_idÁöÑFK
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK

| ABCÂàÜÁ¥ö | ÊúçÂãôÈ†ÖÁõÆ (15) | ÂÖßÂÆπ | Ë¶èÂÆö„ÄÅÂÇôË®ª |
| --- | --- | --- | --- |
| A
(1) | ÂÄãÊ°àÁÆ°ÁêÜÊúçÂãô | Â±ÖÂÆ∂ÊúçÂãô+Êó•ÈñìÁÖßÈ°ß | Êì¨Ë®ÇË®àÁï´„ÄÅËºîÂ∞éBCÂñÆ‰Ωç |
| B
(13) | Â∞èË¶èÊ®°Â§öÊ©üËÉΩÊúçÂãô
Êó•ÈñìÁÖßÈ°ßÊúçÂãô
‰∫§ÈÄöÊé•ÈÄÅÊúçÂãô
Âà∞ÂÆÖÊ≤êÊµ¥ËªäÊúçÂãô
Â±ÖÂÆ∂Â§±ËÉΩÂÄãÊ°àÂÆ∂Â∫≠ÈÜ´Â∏´ÁÖßË≠∑ÊúçÂãô
Â±ÖÂÆ∂ÊúçÂãô
ÂÆ∂Â∫≠ÊâòÈ°ßÊúçÂãô
Â∞àÊ•≠ÁÖßË≠∑ÊúçÂãô
ÂñòÊÅØÊúçÂãô
ÂúòÈ´îÂÆ∂Â±ãÊúçÂãô
ËºîÂÖ∑ÂèäÂ±ÖÂÆ∂ÁÑ°ÈöúÁ§ôÁí∞Â¢ÉÊúçÂãô
ÁáüÈ§äÈ§êÈ£≤ÊúçÂãô | Â±ÖÂÆ∂ÁÖßÈ°ß„ÄÅÁ§æÂçÄÁÖßÈ°ß„ÄÅÊ©üÊßãÁÖßÈ°ß ÂÖ∂‰∏Ä | Â∞èË¶èÊ®°„ÄÅÂ§öÊ©üËÉΩÈï∑ÁÖßÊúçÂãô |
| C
(1) | Â∑∑ÂºÑÈï∑ÁÖßÁ´ô | ÂÖ±È§ê„ÄÅÂÅ•Â∫∑‰øÉÈÄ≤„ÄÅÂª∂Á∑©Â§±ËÉΩ | Á§æÂçÄÂèÉËàá(Èáå)„ÄÅËá®ÊôÇÁü≠ÊôÇÊï∏ÁÖßÈ°ß„ÄÅÂüπËÇ≤‰∏≠È´òÈΩ°ËàáÂ≠∏Áîü‰∫∫ÂäõË≥áÊ∫ê |
- **ins_address**Ôºö‰ª£Ë°®Ê©üÊßãÂíåÂú∞ÂùÄÁõ∏ÈóúÁöÑË≥áË®ä‰ΩúÁÇ∫table
    - add_idÔºö‰ª£Ë°®Ê©üÊßãÂú∞ÂùÄÁöÑ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
        - ÔºàÁî±stringÊßãÊàêaddÁï∂‰ΩúPKÊàñFKÊúÉÈÄ†ÊàêÊïàÁéáÊµ™Ë≤ªÔºåÊâÄ‰ª•Â¢ûÂä†Ê≠§ÁâπÊÄßÁÇ∫PKÈÅîÂà∞Êñπ‰æøÈÅãÁÆóÔºâ
    - addÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÂú∞ÂùÄÂÖ®Âêç
    - cityÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∏£ÊàñÂ∏Ç
    - distÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÂçÄÊàñÈÑâ
    - longitudeÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∂ìÂ∫¶
    - latiitudeÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∑ØÂ∫¶

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%201.png)

```sql
# Modify this code to update the DB schema diagram.
# To reset the sample schema, replace everything with
# two dots ('..' - without quotes).

institution
-
ins_num PK smallint 
ins_add_id FK >- ins_address.add_id smallint
ins_name UNIQUE varchar(50)

ins_capacity
-
ins_num PK smallint FK >- institution.ins_num 
caring_num smallint
nurse_num smallint
dem_num smallint
emp_num smallint #derived
long_caring_num smallint
housing_num smallint #derived
providing_num smallint

ins_info
-
ins_num PK smallint FK >- institution.ins_num
manager varchar(28)
phone varchar(50)
email varchar(100)
website varchar(500)

ins_address
-
add_id PK smallint
add varchar(100)
city char(6)
dist varchar(15)
longitude float
latitude float

type_func
-
int_num PK smallint FK >- institution.ins_num
type smallint
func_name varchar(60) FK >- func_web.func_name

func_web
-
func_name PK varchar(60)
func_website varchar(500)

user
-
user_id int PK
user_name unique varchar(50)
user_email varchar(100)
user_password varchar(50)

user_favorite
-
user_id int PK FK >- user.user_id
ins_num smallint PK FK >- institution.ins_num
```

## Work Plan

---

### Time Schedule

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%202.png)

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%203.png)

[Untitled Database](https://www.notion.so/268bf9f7e7654a0d9ee38f8cd911e67d?pvs=21)

### Discussion

[https://highfalutin-biplane-60c.notion.site/099d5c5a546546ff90322269b20ac268](https://www.notion.so/099d5c5a546546ff90322269b20ac268?pvs=21)

### Repository

https://github.com/Weng-john/DBcourse

```jsx
DROP DATABASE IF EXISTS Final_Project;

CREATE DATABASE Final_Project; 

USE Final_Project;

CREATE TABLE `institution` (
    `ins_num` smallint  NOT NULL ,
    `ins_name` varchar(100)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    ),
    CONSTRAINT `uc_institution_ins_name` UNIQUE (
        `ins_name`
    )
);

CREATE TABLE `ins_capacity` (
    `ins_num` smallint  NOT NULL ,
    `caring_num` smallint  NOT NULL ,
    `nurse_num` smallint  NOT NULL ,
    `dem_num` smallint  NOT NULL ,
    -- derived
    `long_caring_num` smallint  NOT NULL ,
    -- derived
    `housing_num` smallint  NOT NULL ,
    `providing_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_info` (
    `ins_num` smallint  NOT NULL ,
    `manager` varchar(28)  NOT NULL ,
    `phone` varchar(50)  NOT NULL ,
    `email` varchar(100)  NOT NULL ,
    `website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_address` (
    `ins_num` smallint  NOT NULL ,
    `addr` varchar(100)  NOT NULL ,
    `city` char(6)  NOT NULL ,
    `dist` varchar(15)  NOT NULL ,
    `longitude` float  NOT NULL ,
    `latitude` float  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `type_func` (
    `int_num` smallint  NOT NULL ,
    `pub_pri_type` smallint  NOT NULL ,
    `serve_type` smallint  NOT NULL ,
    `func_name` varchar(60)  NOT NULL ,
    PRIMARY KEY (
        `int_num`
    )
);

CREATE TABLE `func_web` (
    `func_name` varchar(60)  NOT NULL ,
    `func_website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `func_name`
    )
);

CREATE TABLE `user` (
    `user_id` int  NOT NULL ,
    `user_name` varchar(50)  NOT NULL ,
    `user_email` varchar(100)  NOT NULL ,
    `user_password` varchar(50)  NOT NULL ,
    PRIMARY KEY (
        `user_id`
    ),
    CONSTRAINT `uc_user_user_name` UNIQUE (
        `user_name`
    )
);

CREATE TABLE `user_favorite` (
    `user_id` int  NOT NULL ,
    `ins_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `user_id`,`ins_num`
    )
);

CREATE TABLE `temp` (
    `pub_pri_type` varchar(20),
    `ins_name` varchar(100),
    `website` varchar(500),
    `manager` varchar(28),
    `dist` varchar(15),
    `addr` varchar(100),
    `phone0` varchar(50),
    `phone1` varchar(50),
    `serve_type0` varchar(10),
    `serve_type1` varchar(10),
    `serve_type2` varchar(10),
    `serve_type3` varchar(10),
    `Init_Date` varchar(50),
    `caring_num` smallint,
    `nurse_num` smallint,
    `dem_num` smallint,
    -- derived
    `long_caring_num` smallint,
    -- derived
    `housing_num` smallint,
    `providing_num_111` smallint,

    CONSTRAINT `uc_temp_ins_name` UNIQUE (
        `ins_name`
    )
);

ALTER TABLE `ins_capacity` ADD CONSTRAINT `fk_ins_capacity_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_info` ADD CONSTRAINT `fk_ins_info_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_address` ADD CONSTRAINT `fk_ins_address_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_int_num` FOREIGN KEY(`int_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_func_name` FOREIGN KEY(`func_name`)
REFERENCES `func_web` (`func_name`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_user_id` FOREIGN KEY(`user_id`)
REFERENCES `user` (`user_id`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

LOAD DATA INFILE '/var/lib/mysql-files/final.csv' 
INTO TABLE temp
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';
```
