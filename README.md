# Elderly Care Map Website

> [English](README.md) | [繁體中文](README.zh-TW.md)

## Final Project Proposal

**Team Members:** 109704001 Hsu Heng-Jui, 109704038 Sun Yu-Han, 110350028 Weng Hua-Chun, 110704008 Lo Wei-Hsiang

## 🎥 Video Demonstration

[Watch Demo Video](https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing)

## Application Design

### Motivation and Purpose

When searching for long-term care related services for family members, we experienced confusion with information and unclear web pages. Therefore, our team wanted to design a convenient database for elderly people and their families, starting from consolidating public data, designing database architecture, and finally implementing both frontend and backend web design.

### CRUD Operations

- **Create:** Allow users to create their own accounts
- **Read:** Allow users to query long-term care services by region, function, and regulations
- **Update:** Allow users to update their favorite institutions
- **Delete:** Allow users to delete their favorite institutions

### Interface

The interface is divided into two main categories:

#### Search Interface
- Function and service search
- Regional search
- Sorting by bed capacity
- Sorting by proximity

#### Map Page
- Home address search feature
- Display relevant information when clicking on landmarks
- Radius function
- Related information such as services, website, contact information

### Implementation Features

- Classification by **bed capacity**: green light for high bed capacity, yellow light for medium, red light for low, displayed in sorted order.
- Classification and search by **service items**.
- Search by **county, city, and township**.
- Use **Google Maps** to allow users to directly view information at addresses, such as contact methods, website, phone number.
- Set address to provide **institutions within a certain radius**, bed capacity status, etc.
- Set address to provide **distance to institutions**.
- Provide **institution name search** and institution information.
- Clicking on an address can directly **link to Google navigation**.
- When categorizing by function, provide related website information and regulations, such as Ministry of Health and Welfare.

## Data Sources

> ***Click the name to go to the data source website***

### [Long-term Care ABC Centers](https://data.gov.tw/dataset/88270)

Institution name, institution code, institution type, county/city, district, full address, longitude, latitude, O_ABC, contracted service items, contracted county/city, contracted area, institution phone, email, institution manager name, contract start date, contract end date, last update time

### [National Institution Directory](https://www.sfaa.gov.tw/sfaa/pages/detail.aspx?nodeid=366&pid=2630)

![Institution Directory](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled.png)

### [Ministry of Health and Welfare Long-term Care Section](https://1966.gov.tw/LTC/mp-207.html)

Long-term care regulations, application instructions

## ER Model

> ***Using [QuickDBD](https://app.quickdatabasediagrams.com/#/d/SVcGqV) to create the ERM diagram. However, this software only supports (mandatory)1:M(optional) relationships, which may not match the actual settings.***

### Database Tables

#### institution
Basic information of the institution as a table
- **ins_num:** Institution code, generated by the system as a unique index-like value, serves as PK
- **ins_name:** Name of the institution

#### ins_info
Related information of the institution as a table
- **ins_num:** Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
- **manager:** Full name of the manager
- **phone:** Institution contact phone
- **website:** Institution related website

#### ins_capacity
Bed capacity of the institution as a table
- **ins_num:** Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
- **car_num:** Number of custodial care beds provided
- **nurs_num:** Number of nursing care beds provided
- **dem_num:** Number of dementia care beds provided
- **lcar_num:** Number of long-term care beds provided
- **housing_num:** Number of beds currently in use
- **providing_num:** Total number of beds provided (derived attribute ⇒ sum of the above cal, lcar... provided beds)

#### type_func
Long-term care level and functions of the institution as a table
- **ins_num:** Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution
- **type:** Institution type (e.g., Long-term care ABC, or private institutions, etc.)
- **func_name:** Services provided, FK to func_name in func_web (Usually an institution only displays main services, not subsidiaries)

#### func_web
Regulation website linked by service name as a table
- **func_name:** Service name, serves as PK
- **web:** Corresponding website

#### member
User-related data
- **member_id:** User ID, generated by the system as a unique index-like value, serves as PK
- **member_name:** User nickname
- **member_email:** User email (Also serves as account)
- **member_password:** User password

#### member_favorite
User's favorite institutions
- **member_id:** User ID, generated by the system as a unique index-like value, serves as PK and FK to user.user_id
- **ins_num:** Institution code, generated by the system as a unique index-like value, serves as PK and FK to institution

#### ins_address
Institution address-related information as a table
- **add_id:** Institution address code, generated by the system as a unique index-like value, serves as PK (Using string as PK or FK would cause efficiency waste, so this attribute is added as PK for convenient calculation)
- **add:** Full address of the institution
- **city:** County or city where the institution is located
- **dist:** District or township where the institution is located
- **longitude:** Longitude of the institution
- **latitude:** Latitude of the institution

### ABC Service Classification

| ABC Level | Service Items (15) | Content | Regulations, Notes |
| --- | --- | --- | --- |
| A (1) | Case Management Service | Home Service + Day Care | Formulate plans, supervise BC units |
| B (13) | Small-scale Multi-function Service<br>Day Care Service<br>Transportation Service<br>Mobile Bathing Service<br>Home-based Disabled Individual Family Doctor Care Service<br>Home Service<br>Family Day Care Service<br>Professional Care Service<br>Respite Service<br>Group Home Service<br>Assistive Devices and Home Barrier-free Environment Service<br>Nutrition and Meal Service | One of: Home Care, Community Care, Institutional Care | Small-scale, multi-functional long-term care service |
| C (1) | Community Long-term Care Station | Group dining, health promotion, disability delay | Community participation (village), temporary short-term care, training middle-aged, elderly and student human resources |

### ER Diagram

![ER Diagram](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%201.png)

### Database Schema Diagram

```sql
# Modify this code to update the DB schema diagram.
# To reset the sample schema, replace everything with
# two dots ('..' - without quotes).

institution
-
ins_num PK smallint 
ins_add_id FK >- ins_address.add_id smallint
ins_name UNIQUE varchar(50)

ins_capacity
-
ins_num PK smallint FK >- institution.ins_num 
caring_num smallint
nurse_num smallint
dem_num smallint
emp_num smallint #derived
long_caring_num smallint
housing_num smallint #derived
providing_num smallint

ins_info
-
ins_num PK smallint FK >- institution.ins_num
manager varchar(28)
phone varchar(50)
email varchar(100)
website varchar(500)

ins_address
-
add_id PK smallint
add varchar(100)
city char(6)
dist varchar(15)
longitude float
latitude float

type_func
-
int_num PK smallint FK >- institution.ins_num
type smallint
func_name varchar(60) FK >- func_web.func_name

func_web
-
func_name PK varchar(60)
func_website varchar(500)

user
-
user_id int PK
user_name unique varchar(50)
user_email varchar(100)
user_password varchar(50)

user_favorite
-
user_id int PK FK >- user.user_id
ins_num smallint PK FK >- institution.ins_num
```

## Work Plan

### Time Schedule

![Time Schedule 1](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%202.png)

![Time Schedule 2](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%203.png)

### Discussion

[Team Discussion Records](https://www.notion.so/099d5c5a546546ff90322269b20ac268?pvs=21)

### Repository

https://github.com/Weng-john/DBcourse

## Database Implementation

```sql
DROP DATABASE IF EXISTS Final_Project;

CREATE DATABASE Final_Project; 

USE Final_Project;

CREATE TABLE `institution` (
    `ins_num` smallint  NOT NULL ,
    `ins_name` varchar(100)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    ),
    CONSTRAINT `uc_institution_ins_name` UNIQUE (
        `ins_name`
    )
);

CREATE TABLE `ins_capacity` (
    `ins_num` smallint  NOT NULL ,
    `caring_num` smallint  NOT NULL ,
    `nurse_num` smallint  NOT NULL ,
    `dem_num` smallint  NOT NULL ,
    -- derived
    `long_caring_num` smallint  NOT NULL ,
    -- derived
    `housing_num` smallint  NOT NULL ,
    `providing_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_info` (
    `ins_num` smallint  NOT NULL ,
    `manager` varchar(28)  NOT NULL ,
    `phone` varchar(50)  NOT NULL ,
    `email` varchar(100)  NOT NULL ,
    `website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_address` (
    `ins_num` smallint  NOT NULL ,
    `addr` varchar(100)  NOT NULL ,
    `city` char(6)  NOT NULL ,
    `dist` varchar(15)  NOT NULL ,
    `longitude` float  NOT NULL ,
    `latitude` float  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `type_func` (
    `int_num` smallint  NOT NULL ,
    `pub_pri_type` smallint  NOT NULL ,
    `serve_type` smallint  NOT NULL ,
    `func_name` varchar(60)  NOT NULL ,
    PRIMARY KEY (
        `int_num`
    )
);

CREATE TABLE `func_web` (
    `func_name` varchar(60)  NOT NULL ,
    `func_website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `func_name`
    )
);

CREATE TABLE `user` (
    `user_id` int  NOT NULL ,
    `user_name` varchar(50)  NOT NULL ,
    `user_email` varchar(100)  NOT NULL ,
    `user_password` varchar(50)  NOT NULL ,
    PRIMARY KEY (
        `user_id`
    ),
    CONSTRAINT `uc_user_user_name` UNIQUE (
        `user_name`
    )
);

CREATE TABLE `user_favorite` (
    `user_id` int  NOT NULL ,
    `ins_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `user_id`,`ins_num`
    )
);

CREATE TABLE `temp` (
    `pub_pri_type` varchar(20),
    `ins_name` varchar(100),
    `website` varchar(500),
    `manager` varchar(28),
    `dist` varchar(15),
    `addr` varchar(100),
    `phone0` varchar(50),
    `phone1` varchar(50),
    `serve_type0` varchar(10),
    `serve_type1` varchar(10),
    `serve_type2` varchar(10),
    `serve_type3` varchar(10),
    `Init_Date` varchar(50),
    `caring_num` smallint,
    `nurse_num` smallint,
    `dem_num` smallint,
    -- derived
    `long_caring_num` smallint,
    -- derived
    `housing_num` smallint,
    `providing_num_111` smallint,

    CONSTRAINT `uc_temp_ins_name` UNIQUE (
        `ins_name`
    )
);

ALTER TABLE `ins_capacity` ADD CONSTRAINT `fk_ins_capacity_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_info` ADD CONSTRAINT `fk_ins_info_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_address` ADD CONSTRAINT `fk_ins_address_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_int_num` FOREIGN KEY(`int_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_func_name` FOREIGN KEY(`func_name`)
REFERENCES `func_web` (`func_name`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_user_id` FOREIGN KEY(`user_id`)
REFERENCES `user` (`user_id`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

LOAD DATA INFILE '/var/lib/mysql-files/final.csv' 
INTO TABLE temp
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';
```

---

## License

This project is an academic database course final project.
